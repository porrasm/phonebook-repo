{"version":3,"sources":["components/comps.js","services/persons.js","App.js","index.js"],"names":["PersonsToTable","persons","app","map","person","react_default","a","createElement","key","name","align","number","onClick","deletePerson","id","comps","_ref","value","state","filter","onChange","filterChange","_ref2","onSubmit","addNewName","newName","nameChange","newNumber","numberChange","type","_ref3","length","filtered","toLowerCase","includes","_ref4","note","className","baseUrl","services_persons","getAll","axios","get","then","response","data","create","newPerson","post","update","put","concat","catch","error","console","log","delete","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","event","target","setState","forceUpdate","preventDefault","dupName","dupNumber","updatePerson","personsSVC","removeNotification","window","confirm","changedPerson","newPersons","p","notification","setTimeout","_this2","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b59c2998.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ app }) => {\r\n    return (\r\n        <div>\r\n            <h3>Rajaa tuloksia</h3>\r\n            <div>Rajaa: <input value={app.state.filter} onChange={app.filterChange} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst AddPerson = ({ app }) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={app.addNewName}>\r\n                <div>\r\n                    nimi: <input value={app.state.newName} onChange={app.nameChange} />\r\n                </div>\r\n                <div>\r\n                    numero: <input value={app.state.newNumber} onChange={app.numberChange} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">lisää</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Persons = ({ app }) => {\r\n\r\n    let persons\r\n\r\n    if (app.state.filter.length === 0) {\r\n        persons = PersonsToTable(app.state.persons, app)\r\n    } else {\r\n        const filtered = app.state.persons.filter(person => person.name.toLowerCase().includes(app.state.filter.toLowerCase()))\r\n        persons = PersonsToTable(filtered, app)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <table>\r\n                <tbody>\r\n                    <tr>\r\n                        <th align=\"left\">Nimi</th>\r\n                        <th align=\"left\">Numero</th>\r\n                        <th align=\"left\">Poista</th>\r\n                    </tr>\r\n                    {persons}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Notification = ({note}) => {\r\n\r\n    if (note === null || note === '') {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"notification\">{note}</div>\r\n    )\r\n}\r\n\r\nconst PersonsToTable = (persons, app) => {\r\n    return persons.map(person => \r\n    <tr key={person.name}>\r\n        <td align=\"left\">{person.name}</td>\r\n        <td align=\"left\">{person.number}</td>\r\n        <td align=\"left\"><button onClick={ () => app.deletePerson(person.id)}>poista</button></td>\r\n    </tr>)\r\n}\r\n\r\nexport default {Filter, AddPerson, Persons, Notification}","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newPerson) => {\r\n    const request = axios.post(baseUrl, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson).catch(error => {\r\n        console.log(\"Failed to update person. \", error)\r\n    })\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n        .catch(error => {\r\n            console.log(\"Deletion failed: \", error)\r\n        })\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React from 'react';\r\nimport Components from './components/comps';\r\nimport personsSVC from './services/persons';\r\nimport './app.css'\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            persons: [],\r\n            newName: '',\r\n            newNumber: '',\r\n            filter: '',\r\n            notification: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log('Did mount.')\r\n\r\n        personsSVC\r\n            .getAll()\r\n            .then(persons => {\r\n                this.setState({ persons })\r\n            })\r\n    }\r\n\r\n    nameChange = (event) => {\r\n        console.log(\"Name change event: \", event.target.value)\r\n        this.setState({ newName: event.target.value })\r\n    }\r\n    numberChange = (event) => {\r\n        console.log(\"Number change event: \", event.target.value)\r\n        this.setState({ newNumber: event.target.value })\r\n    }\r\n    filterChange = (event) => {\r\n        console.log(\"Filter change event: \", event.target.value)\r\n        this.setState({ filter: event.target.value })\r\n        this.forceUpdate()\r\n    }\r\n\r\n    addNewName = (event) => {\r\n\r\n        console.log('Add new name')\r\n\r\n        event.preventDefault();\r\n\r\n        if (this.state.newName.length === 0 || this.state.newNumber.length === 0) {\r\n            console.log(\"Tried to add empty name or number\")\r\n            return\r\n        }\r\n\r\n        const dupName = this.state.persons.map(person => person.name).includes(this.state.newName)\r\n        const dupNumber = this.state.persons.map(person => person.number).includes(this.state.newNumber)\r\n\r\n        if (dupName && dupNumber) {\r\n            console.log(\"Tried to add duplicate name or number: \", this.state.newName, this.state.newNumber)\r\n            return\r\n        } else if (dupName) {\r\n            this.updatePerson()\r\n            return\r\n        }\r\n\r\n        console.log(\"Adding new person: \", this.state.newName, this.state.newNumber)\r\n\r\n        const newPerson = { name: this.state.newName, number: this.state.newNumber }\r\n\r\n        personsSVC.create(newPerson).then(newPerson => {\r\n            console.log(\"Response: \", newPerson)\r\n\r\n            \r\n        })\r\n\r\n        this.removeNotification();\r\n    }\r\n    updatePerson = () => {\r\n\r\n        const person = this.state.persons.filter(person => person.name === this.state.newName)[0]\r\n        console.log(\"Updateing person: \", person)\r\n        const newPerson = { name: person.name, number: this.state.newNumber }\r\n        console.log(\"Replacing with: \", newPerson)\r\n\r\n        if (!window.confirm(\"Haluatko korvata henkilön \", person.name, \" numeron?\")) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            \r\n        } catch (error) {\r\n            \r\n        }\r\n\r\n        personsSVC\r\n            .update(person.id, newPerson)\r\n            .then(changedPerson => {\r\n                const newPersons = this.state.persons.filter(p => p.id !== person.id)\r\n                this.setState({\r\n                    persons: newPersons.concat(changedPerson), notification: \"Päivitettiin \" + person.name + \"n numero.\"\r\n                })\r\n            })\r\n            .catch(error => {\r\n                personsSVC.create(newPerson).then(newPerson => {\r\n                    console.log(\"Response: \", newPerson)\r\n\r\n                    const newPersons = this.state.persons.map(person => {\r\n                        if (person.name === newPerson.name) {\r\n                            person.number = newPerson.number\r\n                        }\r\n                        return person\r\n                    })\r\n\r\n                    this.setState({persons: newPersons})\r\n                })\r\n\r\n            })\r\n\r\n        this.removeNotification();\r\n    }\r\n\r\n    deletePerson = (id) => {\r\n\r\n        if (!window.confirm(\"Haluatko poistaa henkilön?\")) {\r\n            return\r\n        }\r\n\r\n        console.log(\"delete person\")\r\n        personsSVC.deletePerson(id)\r\n            .then(person => {\r\n                const filtered = this.state.persons.filter(person => person.id !== id)\r\n\r\n                this.setState({ persons: filtered, notification: 'Poistettiin henkilö ' })\r\n            })\r\n\r\n        this.removeNotification()\r\n    }\r\n\r\n    removeNotification = () => {\r\n\r\n        console.log(\"removing notification...\")\r\n\r\n        setTimeout(() => {\r\n            this.setState({notification: null})\r\n          }, 5000)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <h2>Puhelinluettelo</h2>\r\n\r\n                <Components.Notification note={this.state.notification} />\r\n\r\n                <Components.Filter app={this} />\r\n\r\n                <h3>Lisää henkilö</h3>\r\n\r\n                <Components.AddPerson app={this} />\r\n\r\n                <h2>Numerot</h2>\r\n\r\n                <Components.Persons app={this} />\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}